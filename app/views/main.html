<div class="header">
  <div class="row">
    <h3 class="text-muted col-md-6">ToDo</h3>
    <div class="col-md-4 pull-right">
      <select class="form-control" ng-model='selectedPlan' ng-options='plan as plan.name for plan in plans'></select>
    </div>
  </div>
</div>

<form role="form" ng-submit="saveAll()">
  <div class="task row" ng-repeat="task in tasks | hideToBeDeleted">
    <div class="col-md-10" ng-switch="!!task.isDirty()">
      <input class="form-control" ng-model="task.text" ng-switch-when="true"/>
      <p class="form-control-static date" ng-switch-when="false">{{task.text}}</p>
    </div>
    <div class="col-md-2">
      <p class="form-control-static date">
        <span class="glyphicon glyphicon-trash pull-right" ng-click="task.setToBeDeleted()"></span>
        <span class="glyphicon glyphicon-pencil pull-right" ng-show="!task.isDirty()" ng-click="task.setAsDirty()"></span>
      </p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12 add-task">
      <a href="" ng-click="addTask()">Agregar nueva tarea</a>
    </div>
  </div>
  <div class="row" ng-show="hasChanged()">
    <div class="col-md-12 save-button">
      <button type="submit" class="btn btn-primary">Guardar</button>
    </div>
  </div>
</form>


<div class="footer">
  <div class="row history">
    <h4 class="col-md-12">Historal:</h4>
    <span class="col-md-4">{{createdCount()}} tareas creadas</span>
    <span class="col-md-4">{{updatedCount()}} tareas editadas</span>
    <span class="col-md-4">{{deletedCount()}} tareas eliminadas</span>
  </div>
  <p>
    <a href="" ng-click="resetCounters()" class="text-muted">reset</a>
  </p>
</div>
